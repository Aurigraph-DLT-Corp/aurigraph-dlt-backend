# Aurigraph V11 Performance Optimization - 15-Core Intel Xeon Gold + 64GB RAM
# Sprint 5: Hardware-Specific Optimization for 1.6M+ TPS Target

# ========================================
# Hardware-Specific Configuration
# ========================================

# 15-Core Intel Xeon Gold Optimization
performance.hardware.cores=15
performance.hardware.threads=30
performance.hardware.ram.gb=64
performance.hardware.numa.nodes=2
performance.hardware.cache.l3.mb=30
performance.hardware.base.frequency.ghz=2.2
performance.hardware.turbo.frequency.ghz=3.8

# NUMA-Aware Configuration
performance.numa.enabled=true
performance.numa.memory.binding=true
performance.numa.cpu.affinity=true
performance.numa.interleave.enabled=false
performance.numa.preferred.node=0
performance.numa.balance.ondemand=false

# CPU Affinity Mapping for Critical Threads
performance.cpu.affinity.consensus.threads=0-7
performance.cpu.affinity.transaction.threads=8-14
performance.cpu.affinity.ai.threads=15-22
performance.cpu.affinity.network.threads=23-29

# ========================================
# Virtual Thread Optimization for 15-Core
# ========================================

# Java 21 Virtual Threads Configuration
performance.virtual.threads.enabled=true
performance.virtual.threads.carrier.pool.size=15
performance.virtual.threads.carrier.pool.parallelism=15
performance.virtual.threads.carrier.pool.keep.alive=60
performance.virtual.threads.scheduler.pool.size=30

# Virtual Thread Pools for Different Components
performance.virtual.threads.consensus.pool=500000
performance.virtual.threads.transaction.pool=750000
performance.virtual.threads.ai.pool=100000
performance.virtual.threads.network.pool=250000
performance.virtual.threads.grpc.pool=150000

# Thread Pool Optimization
performance.thread.pools.forkjoin.parallelism=15
performance.thread.pools.common.parallelism=15
performance.thread.pools.io.parallelism=30
performance.thread.pools.compute.parallelism=15

# ========================================
# Memory Optimization for 64GB RAM
# ========================================

# JVM Heap Configuration (32GB allocation)
performance.jvm.heap.initial.size=8g
performance.jvm.heap.max.size=32g
performance.jvm.heap.new.ratio=3
performance.jvm.heap.survivor.ratio=8

# G1GC Optimization for Large Heap
performance.jvm.gc.collector=G1GC
performance.jvm.gc.g1.heap.region.size=32m
performance.jvm.gc.g1.max.pause.time=50
performance.jvm.gc.g1.gc.threads=15
performance.jvm.gc.g1.concurrent.threads=4
performance.jvm.gc.g1.mixed.gc.count.target=8

# Off-Heap Memory Configuration
performance.memory.offheap.enabled=true
performance.memory.offheap.size.gb=16
performance.memory.offheap.allocation.strategy=direct
performance.memory.offheap.compression.enabled=true

# Memory Mapping for High-Frequency Data
performance.memory.mapping.enabled=true
performance.memory.mapping.size.gb=8
performance.memory.mapping.sync.interval.ms=100
performance.memory.mapping.warmup.enabled=true

# ========================================
# Lock-Free Data Structures Configuration
# ========================================

# Lock-Free Transaction Queue
performance.lockfree.transaction.queue.enabled=true
performance.lockfree.transaction.queue.size=10000000
performance.lockfree.transaction.queue.segments=16
performance.lockfree.transaction.queue.batch.size=1000

# Lock-Free Consensus State
performance.lockfree.consensus.state.enabled=true
performance.lockfree.consensus.state.shards=32
performance.lockfree.consensus.state.compare.and.swap=true

# Atomic Operations Optimization
performance.atomic.operations.optimized=true
performance.atomic.operations.contention.reduction=true
performance.atomic.operations.batch.updates=true

# ========================================
# Cache Optimization for 30MB L3
# ========================================

# CPU Cache Optimization
performance.cpu.cache.line.size=64
performance.cpu.cache.prefetch.distance=8
performance.cpu.cache.temporal.locality=true
performance.cpu.cache.spatial.locality=true

# Data Structure Cache Alignment
performance.cache.alignment.enabled=true
performance.cache.alignment.boundary=64
performance.cache.alignment.padding=true

# Cache-Friendly Data Layout
performance.cache.data.layout.soa=true
performance.cache.data.layout.aos=false
performance.cache.data.layout.hot.cold.splitting=true

# ========================================
# Network Performance Optimization
# ========================================

# High-Performance Networking
performance.network.tcp.no.delay=true
performance.network.tcp.quick.ack=true
performance.network.tcp.cork=false
performance.network.so.reuse.port=true
performance.network.so.reuse.addr=true

# TCP Buffer Optimization
performance.network.tcp.send.buffer.size=1048576
performance.network.tcp.receive.buffer.size=1048576
performance.network.tcp.window.scaling=true
performance.network.tcp.congestion.control=bbr

# gRPC Performance Tuning
performance.grpc.max.concurrent.streams=100000
performance.grpc.initial.window.size=2097152
performance.grpc.max.frame.size=33554432
performance.grpc.channel.pool.size=30
performance.grpc.event.loop.threads=15

# ========================================
# Batch Processing Optimization
# ========================================

# Adaptive Batch Sizing for 15-Core
performance.batch.adaptive.sizing=true
performance.batch.min.size=50000
performance.batch.max.size=500000
performance.batch.optimal.size=200000
performance.batch.sizing.algorithm=reinforcement_learning

# Batch Processing Pipeline
performance.batch.pipeline.stages=4
performance.batch.pipeline.parallelism=15
performance.batch.pipeline.buffering=true
performance.batch.pipeline.prefetch.count=3

# Batch Compression and Encoding
performance.batch.compression.enabled=true
performance.batch.compression.algorithm=lz4
performance.batch.compression.level=3
performance.batch.encoding.vectorized=true

# ========================================
# Consensus Algorithm Optimization
# ========================================

# HyperRAFT++ Tuning for 1.6M+ TPS
performance.consensus.target.tps=1600000
performance.consensus.batch.size=200000
performance.consensus.pipeline.depth=50
performance.consensus.parallel.validation.threads=15

# Leader Election Optimization
performance.consensus.leader.election.timeout.ms=300
performance.consensus.leader.heartbeat.interval.ms=30
performance.consensus.leader.election.backoff.multiplier=1.2

# Vote Processing Optimization
performance.consensus.vote.aggregation.parallel=true
performance.consensus.vote.validation.threads=8
performance.consensus.vote.batch.processing=true

# ========================================
# AI/ML Performance Optimization
# ========================================

# Neural Network Acceleration
performance.ai.neural.network.threads=8
performance.ai.neural.network.vectorization=true
performance.ai.neural.network.simd.enabled=true
performance.ai.neural.network.cache.optimized=true

# ML Model Inference Optimization
performance.ai.inference.batch.size=10000
performance.ai.inference.parallel.execution=true
performance.ai.inference.model.caching=true
performance.ai.inference.quantization.enabled=true

# Training Pipeline Optimization
performance.ai.training.data.parallel=true
performance.ai.training.gradient.accumulation=8
performance.ai.training.mixed.precision=true
performance.ai.training.distributed.enabled=false

# ========================================
# Resource Pool Management
# ========================================

# Connection Pooling
performance.pool.connection.max.size=5000
performance.pool.connection.min.size=500
performance.pool.connection.validation.interval.ms=30000
performance.pool.connection.idle.timeout.ms=600000

# Buffer Pooling
performance.pool.buffer.direct.enabled=true
performance.pool.buffer.size.kb=64
performance.pool.buffer.count=100000
performance.pool.buffer.allocation.strategy=thread_local

# Object Pooling
performance.pool.object.enabled=true
performance.pool.object.size=50000
performance.pool.object.validation=false
performance.pool.object.eviction.policy=lru

# ========================================
# Monitoring and Metrics
# ========================================

# Performance Monitoring
performance.monitoring.enabled=true
performance.monitoring.interval.ms=1000
performance.monitoring.detailed.enabled=false
performance.monitoring.jfr.enabled=true

# Metrics Collection
performance.metrics.tps.enabled=true
performance.metrics.latency.enabled=true
performance.metrics.resource.usage.enabled=true
performance.metrics.cache.statistics.enabled=true

# Performance Alerts
performance.alerts.tps.threshold=1400000
performance.alerts.latency.threshold.ms=100
performance.alerts.cpu.threshold=85
performance.alerts.memory.threshold=80

# ========================================
# Garbage Collection Optimization
# ========================================

# G1GC Fine Tuning
performance.gc.g1.young.gen.size=25
performance.gc.g1.old.gen.occupancy.threshold=45
performance.gc.g1.concurrent.mark.thread.count=4
performance.gc.g1.refinement.threads=15

# GC Pause Time Goals
performance.gc.max.pause.time.ms=50
performance.gc.pause.time.interval.ms=1000
performance.gc.throughput.goal=95

# ========================================
# Compiler Optimizations
# ========================================

# HotSpot Compiler Optimization
performance.compiler.c2.enabled=true
performance.compiler.tiered.compilation=true
performance.compiler.compilation.threshold=10000
performance.compiler.inline.size.kb=35

# Native Image Optimizations
performance.native.pgo.enabled=true
performance.native.optimization.level=O3
performance.native.link.time.optimization=true
performance.native.dead.code.elimination=true