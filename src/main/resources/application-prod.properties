# Aurigraph V11 Production Configuration
# Optimized for 2M+ TPS with ultra-high performance settings

# ================================
# Application Identity
# ================================
quarkus.application.name=aurigraph-v11-production
quarkus.application.version=11.0.0

# ================================
# Network and Protocol Configuration
# ================================

# HTTP Configuration - Ultra-Optimized for Production
quarkus.http.port=9000
quarkus.http.host=0.0.0.0

# HTTP/2 with Maximum Performance Tuning
quarkus.http.http2=true
quarkus.http.limits.max-concurrent-streams=100000
quarkus.http.limits.max-frame-size=16777215
quarkus.http.limits.initial-window-size=2097152
quarkus.http.limits.max-header-size=65536
quarkus.http.limits.max-chunk-size=16384
quarkus.http.limits.max-form-attribute-size=8192

# Advanced TCP Optimizations
quarkus.http.so-reuse-port=true
quarkus.http.tcp-quick-ack=true
quarkus.http.tcp-cork=true
quarkus.http.tcp-fast-open=true
quarkus.http.tcp-no-delay=true
quarkus.http.tcp-keep-alive=true

# Connection Management
quarkus.http.idle-timeout=300s
quarkus.http.read-timeout=60s
quarkus.http.body-handler.uploads-directory=${java.io.tmpdir}/aurigraph-uploads

# gRPC Configuration - Production Optimized
quarkus.grpc.server.port=9001
quarkus.grpc.server.host=0.0.0.0
quarkus.grpc.server.use-separate-server=true
quarkus.grpc.server.enable-reflection-service=false
quarkus.grpc.server.keep-alive-time=60
quarkus.grpc.server.keep-alive-timeout=10
quarkus.grpc.server.permit-keep-alive-time=30
quarkus.grpc.server.permit-keep-alive-without-calls=false
quarkus.grpc.server.max-inbound-message-size=33554432
quarkus.grpc.server.max-inbound-metadata-size=65536

# gRPC Network Optimization - Production Level
grpc.max-concurrent-streams=50000
grpc.initial-window-size=2097152
grpc.max-frame-size=16777215
grpc.keep-alive-time=60
grpc.keep-alive-timeout=10
grpc.event-loop-threads=0
grpc.use-epoll=true
grpc.use-domain-sockets=true

# Connection Pool Configuration - Enterprise Grade
grpc.pool.max-connections=5000
grpc.pool.min-connections=100
grpc.pool.connection-timeout=30
grpc.pool.health-check-interval=30
grpc.pool.max-idle-time=900

# Stream Compression - Production Optimized
grpc.compression.enabled=true
grpc.compression.algorithm=gzip
grpc.compression.min-size=2048
grpc.compression.level=6
grpc.compression.adaptive=true

# Load Balancer Configuration - Enterprise
grpc.lb.algorithm=WEIGHTED_ROUND_ROBIN
grpc.lb.health-check-interval=15
grpc.lb.failover-threshold=2
grpc.lb.recovery-interval=60
grpc.lb.sticky-sessions=true

# ================================
# Security Configuration
# ================================

# TLS/SSL Configuration (disabled for development, enable with proper certificates in production)
# quarkus.http.ssl.protocols=TLSv1.3,TLSv1.2
# quarkus.http.ssl.cipher-suites=TLS_AES_256_GCM_SHA384,TLS_CHACHA20_POLY1305_SHA256,TLS_AES_128_GCM_SHA256
# quarkus.http.ssl-port=9443
# quarkus.http.insecure-requests=redirect

# CORS Configuration - Production Domains Only
quarkus.http.cors=true
quarkus.http.cors.origins=https://dlt.aurigraph.io,https://api.aurigraph.io
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,X-Requested-With,Accept,Origin,X-API-Key
quarkus.http.cors.exposed-headers=Location,Content-Disposition,X-Total-Count
quarkus.http.cors.access-control-max-age=86400
quarkus.http.cors.access-control-allow-credentials=false

# Security Headers
quarkus.http.filter.security.header.X-Frame-Options=DENY
quarkus.http.filter.security.header.X-Content-Type-Options=nosniff
quarkus.http.filter.security.header.X-XSS-Protection=1; mode=block
quarkus.http.filter.security.header.Strict-Transport-Security=max-age=31536000; includeSubDomains; preload
quarkus.http.filter.security.header.Content-Security-Policy=default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'

# ================================
# Performance and Concurrency
# ================================

# Virtual Threads (Java 21) - Production Scale
quarkus.virtual-threads.enabled=true
quarkus.virtual-threads.name-pattern=aurigraph-prod-vt-#
quarkus.virtual-threads.max-pooled=500000
quarkus.virtual-threads.executor.max-threads=500000
quarkus.virtual-threads.shutdown-timeout=60

# Native Compilation - Production Optimized
quarkus.native.container-build=true
quarkus.native.container-runtime=docker
quarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:jdk-21
quarkus.native.enable-https-url-handler=true
quarkus.native.resources.includes=*.proto,*.properties,*.yml,*.yaml
# GraalVM 21 Compatible Flags (Updated Nov 7, 2025 - Sprint 18)
# Changed --optimize=2 to -O2, --gc=G1 not supported on macOS, removed UseG1GC
quarkus.native.additional-build-args=-O2,-march=compatibility,-H:+UnlockExperimentalVMOptions

# ================================
# Consensus Configuration - Production Scale
# ================================

# HyperRAFT++ Consensus - Production Cluster (15-Node)
consensus.node.id=${CONSENSUS_NODE_ID:aurigraph-prod-node-${HOSTNAME:1}}
consensus.validators=aurigraph-prod-node-1,aurigraph-prod-node-2,aurigraph-prod-node-3,aurigraph-prod-node-4,aurigraph-prod-node-5,aurigraph-prod-node-6,aurigraph-prod-node-7,aurigraph-prod-node-8,aurigraph-prod-node-9,aurigraph-prod-node-10,aurigraph-prod-node-11,aurigraph-prod-node-12,aurigraph-prod-node-13,aurigraph-prod-node-14,aurigraph-prod-node-15
consensus.election.timeout.ms=250
consensus.heartbeat.interval.ms=25
consensus.batch.size=200000
consensus.pipeline.depth=100
consensus.parallel.threads=1024
consensus.target.tps=5000000

# Consensus Network Configuration
consensus.network.compression=true
consensus.network.encryption=true
consensus.network.buffer.size=16777216
consensus.network.batch.timeout.ms=5

# Leader Election Optimization
consensus.leader.election.fast=true
consensus.leader.election.preemptive=true
consensus.leader.election.priority.based=true

# ================================
# AI Optimization - Production ML
# ================================

# Core AI Configuration - Enterprise Level
ai.optimization.enabled=true
ai.optimization.learning.rate=0.00005
ai.optimization.model.update.interval.ms=2500
ai.optimization.prediction.window.ms=1000
ai.optimization.anomaly.threshold=0.95
ai.optimization.target.tps=10000000
ai.optimization.min.confidence=0.90

# Predictive Routing Engine - Production Scale
routing.prediction.enabled=true
routing.prediction.window.ms=500
routing.load.balance.threshold=0.85
routing.congestion.threshold=0.80
routing.node.count=15
routing.prediction.accuracy.target=0.95
routing.adaptive.learning=true

# Anomaly Detection - Production Security
anomaly.detection.enabled=true
anomaly.detection.sensitivity=0.98
anomaly.detection.window.size=5000
anomaly.detection.update.interval.ms=2500
anomaly.detection.alert.threshold=0.90
anomaly.detection.response.timeout.ms=15000
anomaly.detection.false.positive.target=0.01

# ML Load Balancer - Enterprise Grade
ml.loadbalancer.enabled=true
ml.loadbalancer.algorithm=DEEP_REINFORCEMENT_LEARNING
ml.loadbalancer.rebalance.interval.ms=2500
ml.loadbalancer.prediction.window.ms=5000
ml.loadbalancer.resource.count=32
ml.loadbalancer.load.threshold=0.85
ml.loadbalancer.learning.rate=0.005
ml.loadbalancer.exploration.rate=0.05

# Adaptive Batch Processor - Ultra Performance
batch.processor.enabled=true
batch.processor.min.size=1000
batch.processor.max.size=500000
batch.processor.default.size=100000
batch.processor.timeout.ms=2500
batch.processor.adaptation.interval.ms=1000
batch.processor.parallel.workers=512
batch.processor.compression.enabled=true
batch.processor.priority.levels=10

# ================================
# Ultra-Performance Configuration
# ================================

# Transaction Processing - 5M+ TPS Target
aurigraph.transaction.shards=1024
aurigraph.batch.size.optimal=200000
aurigraph.processing.parallelism=2048
aurigraph.virtual.threads.max=1000000
aurigraph.cache.size.max=50000000
aurigraph.ultra.performance.mode=true

# Memory-Mapped Transaction Pool - Production Scale
aurigraph.memory.pool.enabled=true
aurigraph.memory.pool.size.mb=8192
aurigraph.memory.pool.segments=512
aurigraph.memory.pool.allocation.strategy=LOCK_FREE_ATOMIC

# SIMD and Cache Optimization - Enterprise Hardware
aurigraph.simd.enabled=true
aurigraph.simd.vector.width=512
aurigraph.cache.line.size=64
aurigraph.numa.aware=true
aurigraph.cpu.affinity.enabled=true
aurigraph.cpu.isolation=true

# Lock-Free Data Structures - Ultra Performance
aurigraph.lockfree.enabled=true
aurigraph.lockfree.retry.limit=10000
aurigraph.lockfree.backoff.strategy=ADAPTIVE_EXPONENTIAL
aurigraph.lockfree.memory.ordering=ACQUIRE_RELEASE

# ================================
# Monitoring and Observability
# ================================

# Logging Configuration - Production
quarkus.log.level=INFO
quarkus.log.category."io.aurigraph".level=INFO
quarkus.log.category."io.aurigraph.v11.performance".level=DEBUG
quarkus.log.console.enable=true
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%c{3.}] (%t) [%X{traceId},%X{spanId}] %s%e%n
quarkus.log.console.json=true

# File Logging
quarkus.log.file.enable=false
quarkus.log.file.path=/deployments/logs/aurigraph-v11.log
quarkus.log.file.format=%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p [%c{3.}] (%t) [%X{traceId},%X{spanId}] %s%e%n
# File logging rotation disabled - Oct 15, 2025 (Fixed configuration bug)
# quarkus.log.file.rotation.max-file-size=100M
# quarkus.log.file.rotation.max-backup-index=10
# quarkus.log.file.rotation.file-suffix=.yyyy-MM-dd
# quarkus.log.file.rotation.rotate-on-boot=true

# Metrics Configuration - Enterprise Monitoring
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics
quarkus.micrometer.export.prometheus.default-labels.application=${quarkus.application.name}
quarkus.micrometer.export.prometheus.default-labels.environment=production
quarkus.micrometer.binder.vertx.enabled=true
quarkus.micrometer.binder.mp-metrics.enabled=true

# Health Checks - Production Ready
quarkus.smallrye-health.root-path=/q/health
quarkus.smallrye-health.liveness-path=/q/health/live
quarkus.smallrye-health.readiness-path=/q/health/ready
quarkus.smallrye-health.startup-path=/q/health/started

# Distributed Tracing - Production Monitoring
quarkus.opentelemetry.enabled=true
quarkus.opentelemetry.tracer.exporter.otlp.endpoint=${JAEGER_ENDPOINT:http://jaeger:14268/api/traces}
quarkus.opentelemetry.tracer.sampler=ratio
quarkus.opentelemetry.tracer.sampler.ratio=0.1

# ================================
# HMS Integration - Production
# ================================

# Alpaca Markets Integration - Production APIs
hms.alpaca.api.key=${ALPACA_API_KEY:}
hms.alpaca.secret.key=${ALPACA_SECRET_KEY:}
hms.alpaca.base.url=${ALPACA_BASE_URL:https://api.alpaca.markets}
hms.tokenization.batch.size=10000
hms.performance.target.tps=500000
hms.quantum.encryption.level=5

# HMS Performance Settings - Enterprise
hms.connection.pool.size=100
hms.timeout.api.call.ms=10000
hms.retry.max.attempts=5
hms.circuit.breaker.enabled=true
hms.tokenization.timeout.ms=2
hms.cross.chain.deployment.timeout.ms=15000

# HMS gRPC Service - Production
hms.grpc.enabled=true
hms.grpc.port=9001
hms.grpc.streaming.buffer.size=10000
hms.grpc.streaming.throttle.ms=1

# ================================
# Healthcare Integration - HIPAA Compliant
# ================================

# Healthcare Data Tokenization - HIPAA Level 5
healthcare.hipaa.encryption.level=5
healthcare.phi.retention.days=7300
healthcare.consent.auto.expire.days=365
healthcare.audit.retention.years=15
healthcare.compliance.monitoring.enabled=true

# Healthcare Provider Network - Enterprise Scale
healthcare.provider.validation.enabled=true
healthcare.provider.credential.verification=true
healthcare.provider.license.check.interval.hours=12
healthcare.provider.network.max.size=1000000

# HL7 FHIR Integration - Production Compliance
fhir.version=4.0.1
fhir.terminology.auto.update.enabled=true
fhir.interoperability.score.threshold=99.0
fhir.clinical.decision.support.enabled=true
fhir.quality.reporting.enabled=true
fhir.population.health.analytics.enabled=true

# Clinical Terminology Systems - Enterprise
terminology.icd10.enabled=true
terminology.snomed.enabled=true
terminology.loinc.enabled=true
terminology.cpt.enabled=true
terminology.mapping.confidence.threshold=95.0
terminology.update.interval.hours=168

# Medical Imaging - Production DICOM
medical.imaging.dicom.compliance=true
medical.imaging.compression.enabled=true
medical.imaging.encryption.quantum.enabled=true
medical.imaging.fda.device.tracking=true
medical.imaging.max.file.size.mb=4096

# Patient Consent Management - Blockchain Immutable
patient.consent.smart.contracts.enabled=true
patient.consent.granular.permissions=true
patient.consent.automatic.expiry=true
patient.consent.blockchain.immutable=true
patient.consent.audit.comprehensive=true

# Clinical Decision Support System - AI Enhanced
cds.medication.interaction.alerts=true
cds.allergy.warnings=true
cds.preventive.care.reminders=true
cds.diagnostic.recommendations=true
cds.treatment.protocol.guidance=true
cds.real.time.scoring=true

# Quality Reporting and Analytics - Comprehensive
quality.reporting.period.monthly=true
quality.reporting.period.quarterly=true
quality.reporting.period.annual=true
quality.reporting.population.health=true
quality.reporting.clinical.measures=true
quality.reporting.patient.satisfaction=true

# Insurance Claim Processing - Automated
insurance.claim.smart.contracts=true
insurance.claim.fraud.detection=true
insurance.claim.automated.processing=true
insurance.claim.real.time.validation=true
insurance.claim.blockchain.verification=true

# Telemedicine Integration - Full Stack
telemedicine.session.tokenization=true
telemedicine.video.encryption=true
telemedicine.hipaa.compliance=true
telemedicine.billing.integration=true
telemedicine.quality.metrics=true

# Medical Research Data Sharing - Regulatory Compliant
research.data.anonymization=true
research.data.consent.management=true
research.data.blockchain.immutable=true
research.data.collaboration.platform=true
research.data.regulatory.compliance=true

# ================================
# Regulatory Compliance - Full Stack
# ================================
regulatory.hipaa.enabled=true
regulatory.fda.enabled=true
regulatory.gdpr.enabled=true
regulatory.soc2.type2.enabled=true
regulatory.state.health.dept.enabled=true
regulatory.automated.reporting=true

# ================================
# LevelDB Advanced Tuning (ADDED - Oct 9, 2025)
# ================================

# Advanced LevelDB performance settings
leveldb.max.open.files=10000
leveldb.block.size.kb=64
leveldb.bloom.filter.bits=10
leveldb.compression.type=snappy

# Cache eviction policy
aurigraph.cache.eviction.policy=LRU
aurigraph.cache.ttl.seconds=3600

# ================================
# Environment-Specific Overrides
# ================================

# Database Configuration (Production) - PostgreSQL
%prod.quarkus.datasource.db-kind=postgresql
%prod.quarkus.datasource.username=${DB_USERNAME:aurigraph}
%prod.quarkus.datasource.password=${DB_PASSWORD:aurigraph2025}
%prod.quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/aurigraph_demos}
%prod.quarkus.datasource.jdbc.max-size=100
%prod.quarkus.datasource.jdbc.min-size=10

# Redis Configuration (Production)
%prod.quarkus.redis.hosts=${REDIS_URL:redis://aurigraph-redis:6379}
%prod.quarkus.redis.timeout=10s
%prod.quarkus.redis.max-pool-size=64

# Message Queue Configuration (Production)
%prod.quarkus.qpid-jms.url=${AMQP_URL:amqp://aurigraph-mq:5672}
%prod.quarkus.qpid-jms.username=${AMQP_USERNAME:aurigraph}
%prod.quarkus.qpid-jms.password=${AMQP_PASSWORD:}

# Service Discovery (Production)
%prod.consul.agent.host=${CONSUL_HOST:consul}
%prod.consul.agent.port=${CONSUL_PORT:8500}

# Secrets Management (Production)
%prod.vault.url=${VAULT_URL:http://vault:8200}
%prod.vault.token=${VAULT_TOKEN:}

# ================================
# JVM Optimization (Fallback)
# ================================
%prod.quarkus.native.enable-fallback-images=false
%prod.quarkus.package.jar.type=uber-jar