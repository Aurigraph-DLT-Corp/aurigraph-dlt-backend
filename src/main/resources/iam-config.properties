# Aurigraph IAM Configuration
# IAM Service Integration for Authentication and Authorization

# IAM Server Configuration
iam.server.url=https://iam2.aurigraph.io
iam.server.timeout.ms=30000
iam.server.retry.max=3
iam.server.connection.pool.size=20

# IAM Admin Credentials (Should be stored in secure vault in production)
iam.admin.username=aurdltadmin
# Note: In production, use environment variable or secure vault
# iam.admin.password=${IAM_ADMIN_PASSWORD}
iam.admin.password.encrypted=ENC(Column@2025)

# Realm Configuration
iam.realms.enabled=AurigraphDLT,AWD,AurCarbonTrace,AurHydroPulse
iam.realm.default=AurigraphDLT

# AurigraphDLT Realm Configuration (Primary)
iam.realm.aurigraphdlt.name=AurigraphDLT
iam.realm.aurigraphdlt.client.id=aurigraph-dlt-client
iam.realm.aurigraphdlt.client.secret=${AURIGRAPH_DLT_CLIENT_SECRET:default-secret}
iam.realm.aurigraphdlt.scope=openid,profile,email,roles,dlt-admin
iam.realm.aurigraphdlt.grant.type=client_credentials,authorization_code
iam.realm.aurigraphdlt.token.endpoint=/realms/AurigraphDLT/protocol/openid-connect/token
iam.realm.aurigraphdlt.auth.endpoint=/realms/AurigraphDLT/protocol/openid-connect/auth
iam.realm.aurigraphdlt.userinfo.endpoint=/realms/AurigraphDLT/protocol/openid-connect/userinfo

# AWD Realm Configuration
iam.realm.awd.name=AWD
iam.realm.awd.client.id=aurigraph-v11-client
iam.realm.awd.client.secret=${AWD_CLIENT_SECRET:default-secret}
iam.realm.awd.scope=openid,profile,email,roles
iam.realm.awd.grant.type=client_credentials,authorization_code
iam.realm.awd.token.endpoint=/realms/AWD/protocol/openid-connect/token
iam.realm.awd.auth.endpoint=/realms/AWD/protocol/openid-connect/auth
iam.realm.awd.userinfo.endpoint=/realms/AWD/protocol/openid-connect/userinfo

# AurCarbonTrace Realm Configuration
iam.realm.aurcarbontrace.name=AurCarbonTrace
iam.realm.aurcarbontrace.client.id=carbon-trace-client
iam.realm.aurcarbontrace.client.secret=${CARBON_CLIENT_SECRET:default-secret}
iam.realm.aurcarbontrace.scope=openid,profile,carbon-tracking
iam.realm.aurcarbontrace.grant.type=client_credentials
iam.realm.aurcarbontrace.token.endpoint=/realms/AurCarbonTrace/protocol/openid-connect/token
iam.realm.aurcarbontrace.auth.endpoint=/realms/AurCarbonTrace/protocol/openid-connect/auth

# AurHydroPulse Realm Configuration  
iam.realm.aurhydropulse.name=AurHydroPulse
iam.realm.aurhydropulse.client.id=hydro-pulse-client
iam.realm.aurhydropulse.client.secret=${HYDRO_CLIENT_SECRET:default-secret}
iam.realm.aurhydropulse.scope=openid,profile,hydro-monitoring
iam.realm.aurhydropulse.grant.type=client_credentials
iam.realm.aurhydropulse.token.endpoint=/realms/AurHydroPulse/protocol/openid-connect/token
iam.realm.aurhydropulse.auth.endpoint=/realms/AurHydroPulse/protocol/openid-connect/auth

# JWT Token Configuration
iam.jwt.issuer=https://iam2.aurigraph.io
iam.jwt.audience=aurigraph-v11
iam.jwt.expiry.minutes=60
iam.jwt.refresh.expiry.days=30
iam.jwt.algorithm=RS256
iam.jwt.public.key.endpoint=/realms/{realm}/protocol/openid-connect/certs

# OAuth2 Configuration
oauth2.authorization.endpoint=https://iam2.aurigraph.io/realms/{realm}/protocol/openid-connect/auth
oauth2.token.endpoint=https://iam2.aurigraph.io/realms/{realm}/protocol/openid-connect/token
oauth2.userinfo.endpoint=https://iam2.aurigraph.io/realms/{realm}/protocol/openid-connect/userinfo
oauth2.logout.endpoint=https://iam2.aurigraph.io/realms/{realm}/protocol/openid-connect/logout
oauth2.introspection.endpoint=https://iam2.aurigraph.io/realms/{realm}/protocol/openid-connect/token/introspect

# Security Configuration
security.cors.allowed.origins=https://dlt.aurigraph.io,https://iam2.aurigraph.io
security.csrf.enabled=true
security.rate.limiting.enabled=true
security.rate.limit.requests.per.minute=1000

# Session Management
session.timeout.minutes=30
session.max.concurrent=5
session.store.type=redis
session.cookie.secure=true
session.cookie.httponly=true
session.cookie.samesite=strict

# Audit Configuration
audit.enabled=true
audit.log.authentication=true
audit.log.authorization=true
audit.log.admin.actions=true
audit.retention.days=90

# Cache Configuration for IAM Tokens
cache.iam.tokens.enabled=true
cache.iam.tokens.ttl.minutes=5
cache.iam.tokens.max.size=10000
cache.iam.user.info.ttl.minutes=15

# Health Check Configuration
healthcheck.iam.enabled=true
healthcheck.iam.interval.seconds=60
healthcheck.iam.timeout.seconds=10

# Development Mode Settings
%dev.iam.server.url=https://iam2.aurigraph.io
%dev.security.csrf.enabled=false
%dev.session.cookie.secure=false
%dev.audit.enabled=false

# Test Mode Settings
%test.iam.server.url=http://localhost:8080/mock-iam
%test.iam.admin.username=test-admin
%test.iam.admin.password.encrypted=test-password
%test.security.csrf.enabled=false

# Production Mode Settings
%prod.iam.admin.password.encrypted=${IAM_ADMIN_PASSWORD_ENCRYPTED}
%prod.security.rate.limit.requests.per.minute=10000
%prod.session.max.concurrent=100
%prod.cache.iam.tokens.max.size=100000